<!-- TOC -->autoauto- [1. 学习](#1-学习)auto    - [1.1. 服务器缓存](#11-服务器缓存)auto        - [1.1.1. 定义](#111-定义)auto        - [1.1.2. HTTP 304 返回状态码的意思是什么](#112-http-304-返回状态码的意思是什么)auto    - [1.2. 客户端缓存(Client Cache)](#12-客户端缓存client-cache)auto    - [1.3. meta标签](#13-meta标签)auto        - [1.3.1. 定义](#131-定义)auto        - [1.3.2. 作用](#132-作用)auto        - [1.3.3. 标签组成](#133-标签组成)auto        - [1.3.4. 、http-equiv属性](#134-http-equiv属性)auto        - [1.3.5. 、name属性](#135-name属性)autoauto<!-- /TOC -->
# 1. 学习
## 1.1. 服务器缓存
### 1.1.1. 定义
缓存指的是将需要频繁访问的网络内容存放在离用户较近、访问速度更快的系统中，以提高内容访问速度的一种技术。
### 1.1.2. HTTP 304 返回状态码的意思是什么
HTTP 304 错误
Not Modified 客户端有缓冲的文档并发出了一个条件性的请求（一般是提供If-Modified-Since头表示客户只想比指定日期更新的文档）。服务器告诉客户，原来缓冲的文档还可以继续使用。
如果客户端在请求一个文件的时候，发现自己缓存的文件有 Last Modified ，那么在请求中会包含 If Modified Since ，这个时间就是缓存文件的 Last Modified 。因此，如果请求中包含 If Modified Since，就说明已经有缓存在客户端。只要判断这个时间和当前请求的文件的修改时间就可以确定是返回 304 还是 200 。对于静态文件，例如：CSS、图片，服务器会自动完成 Last Modified 和 If Modified Since 的比较，完成缓存或者更新。但是对于动态页面，就是动态产生的页面，往往没有包含 Last Modified 信息，这样浏览器、网关等都不会做缓存，也就是在每次请求的时候都完成一个 200 的请求。

因此，对于动态页面做缓存加速，首先要在 Response 的 HTTP Header 中增加 Last Modified 定义，其次根据 Request 中的 If Modified Since 和被请求内容的更新时间来返回 200 或者 304 。虽然在返回 304 的时候已经做了一次数据库查询，但是可以避免接下来更多的数据库查询，并且没有返回页面内容而只是一个 HTTP Header，从而大大的降低带宽的消耗，对于用户的感觉也是提高。

当这些缓存有效的时候，通过 HttpWatch 查看一个请求会得到这样的结果：
第一次访问 200
鼠标点击二次访问 (Cache)
按F5刷新 304
按Ctrl+F5强制刷新 200

304不是错误。是请求一下图片，如果图片在上次访问后没有更新过，就不用下载了，返回304，叫浏览器直接用cache里的，这个很正常的

## 1.2. 客户端缓存(Client Cache)
不管哪个client都会缓存已经访问过的站点，但是浏览器缓存时间都是短暂的，所以最好是自定义延长浏览器缓存。
需要修改Http头信息了，头信息中有个字段：
```
Cache-Control:no-cache
```
有很多办法可以修改头字段，比较方便通用的就是在web.config里设置，例如：
```
<?xml version="1.0"?> 
<configuration> 
  <system.webServer> 
    <staticContent> 
      <clientCache cacheControlMode="UseMaxAge" cacheControlMaxAge="00.03:00:00"/> 
    </staticContent> 
  </system.webServer> 
    <system.web> 
    </system.web> 
</configuration>
```

这里设置是文件的缓存生命为3个小时，对当前config目录下所有文件有效，如果需要对某个文件单独设置可以用<location>节来配置。

另外除了生命周期外还可以设置过期时间比如2012-12-12


## 1.3. meta标签
```
<META HTTP-EQUIV="Pragma" CONTENT="no-cache">
```
### 1.3.1. 定义 
meta是html语言head区的一个辅助性标签。
### 1.3.2. 作用
搜索引擎优化（SEO），定义页面使用语言，自动刷新并指向新的页面，实现网页转换时的动态效果，控制页面缓冲，网页定级评价，控制网页显示的窗口等
### 1.3.3. 标签组成
meta两个属性:
http-equiv(超文本传输协议标题信息)和name\
不同属性具有不同参数值，不同参数值实现了不同的网页功能
### 1.3.4. 、http-equiv属性
http-equiv顾名思义，相当于http的文件头作用，它可以向浏览器传回一些有用的信息，以帮助正确和精确地显示网页内容，与之对应的属性值为content，content中的内容其实就是各个参数的变量值。

1. expires(期限)     用于设置网页的到期时间，一旦网页到期，必须到服务器上重新传输。
   
   ```＜meta http-equiv="expires" content="Wed, 20 Jun 2007 22:33:00 GMT"＞```

   注：必须是GMT标准时间
2. pragma(cache)    用于设置浏览器禁止从本地的缓存中调取页面内容，设定后一旦离开，网页就无法从cache中调出。
   ```<META HTTP-EQUIV="Pragma" CONTENT="no-cache">```

   告诉浏览器当前页面不被缓存，每次访问都需要去服务器拉取。使用上很简单，但只有部分浏览器可以支持，而且所有缓存代理服务器都不支持，因为代理不解析HTML内容本身。
3. refresh(刷新)     自动刷新并指向新页面
   ```＜meta http-equiv="Refresh" content="2；URL=http://www.net.cn/"＞```/两秒钟后跳转到http://www.net.cn。如果省略url则2秒钟后跳转到本页面，即刷新本页面。

4. Set-Cookie(设置cookie)   如果网页过期，存盘的cookie将会被删除。（是设置网页过期时间还是设置网页过期时间，需后续研究）
   ```＜meta http-equiv="Set-Cookie" content="cookievalue=xxx;expires=Wednesday, 20-Jun-2007 22:33:00 GMT； path=/"＞//时间格式依旧是GMT格式。```
5. window-target(显示窗口的设定)    强制页面在当前页面以独立窗口展示，防止别人在框架中调用自己的页面。
   ```＜meta http-equiv="Window-target" content="_top"＞```
6. content-type(显示字符集的设定)       设置页面使用的字符集
    ```＜meta http-equiv="content-Type"content="text/html; charset=gb2312"＞```
### 1.3.5. 、name属性
name属性用于描述网页，与之对应属性content，content中的内容便于搜索引擎机器人查找信息和分类信息使用 \
meta标签的name属性语法格式
```
<meta name="参数" content=“具体的参数值”>
```
1. keywords 

    说明：keywords用来告诉搜索引擎你网页的关键字是什么。

    举例：```<meta name="keywords"content="science,education,culture,politics,ecnomics，relationships,entertaiment,human">```

2. description 

    说明：description用来告诉搜索引擎你的网站主要内容。

    举例：```<meta name="description"content="Thispageisaboutthemeaningofscience,education,culture.">```


3. author 

    说明：标注网页的作者

    举例：```<meta name="author"content="root,root@xxxx.com">```

4. robots 

    说明：robots用来告诉搜索机器人哪些页面需要索引，哪些页面不需要索引。

    content的参数有all,none,index,noindex,follow,nofollow。默认是all。

    举例：
    ```<meta name="robots"content="none">```
